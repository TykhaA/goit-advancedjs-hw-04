{"version":3,"file":"commonHelpers.js","sources":["../src/index.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\niziToast.settings({\n    timeout: 3000, \n    resetOnHover: true,\n    position: 'topRight',\n});\nconst elements = {\n    form: document.querySelector('.js-form'),\n    gallery: document.querySelector('.gallery'),\n    guard: document.querySelector('.js-guard')\n}\nconst options = {\n    rootMargin: '50px'\n}\nconst observer = new IntersectionObserver(handlerNoadMore, options);\nlet page = 1;\nlet value = \"\";\nfunction createMarkup(response) {\n    const markupData = response.data.hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<div class=\"photo-card\">\n            <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\">\n                    <b>Likes</b>\n                    <span>${likes}</span>\n                </p>\n                <p class=\"info-item\">\n                    <b>Views</b>\n                    <span>${views}</span>\n                </p>\n                <p class=\"info-item\">\n                    <b>Comments</b>\n                    <span>${comments}</span>\n                </p>\n                <p class=\"info-item\">\n                    <b>Downloads</b>\n                    <span>${downloads}</span>\n                </p>\n            </div>\n         </div>`\n    }).join('');\n    elements.gallery.insertAdjacentHTML('beforeend', markupData);\n}\n\nelements.form.addEventListener('submit', handlerSearch);\nfunction handlerSearch(evt) {\n    evt.preventDefault();\n    \n    const { searchQuery } = evt.currentTarget.elements;\n    elements.gallery.innerHTML = '';\n    value = searchQuery.value;\n    if (value !== \"\") {\n          serviceItems(value, page);\n        elements.form.reset();\n    } else {\n        iziToast.error({\n            message: `Sorry, there are no images matching your search query. Please try again.`,\n          });\n     }\n   \n}\nasync function serviceItems(value, page) {\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?key=42309515-7c9611a24bfcb09e365820ed6&q=${value}&image_type=photo&orientation=horizontal&=true&per_page=40&page=${page}`)\n        if (response.data.hits.length === 0) {\n            iziToast.error({\n                message: `Sorry, there are no images matching your search query. Please try again.`,\n              });\n        } else {\n            createMarkup(response);\n            let photoCard = new SimpleLightbox('.photo-card a', {\n                captionDelay :'250'\n            });\n        }\n        if (page <= response.data.total / 40 && page < 500) {\n            observer.observe(elements.guard)\n        } else {\n            observer.unobserve(elements.guard);\n        }\n    }\n    catch(error) {\n        iziToast.error({\n            message: `Sorry, there are no images matching your search query. Please try again.`,\n          });\n    }\n}\nfunction handlerNoadMore(entries) {\n    entries.forEach(entry => {\n        if (entry.isIntersecting) {\n            page += 1;\n            serviceItems(value, page);\n             const { height: cardHeight } = document\n            .querySelector(\".gallery\")\n            .firstElementChild.getBoundingClientRect();\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: \"smooth\",\n            });\n        }\n    })\n}"],"names":["iziToast","elements","options","observer","handlerNoadMore","page","value","createMarkup","response","markupData","webformatURL","largeImageURL","tags","likes","views","comments","downloads","handlerSearch","evt","searchQuery","serviceItems","axios","photoCard","SimpleLightbox","entries","entry","cardHeight"],"mappings":"owBAMAA,EAAS,SAAS,CACd,QAAS,IACT,aAAc,GACd,SAAU,UACd,CAAC,EACD,MAAMC,EAAW,CACb,KAAM,SAAS,cAAc,UAAU,EACvC,QAAS,SAAS,cAAc,UAAU,EAC1C,MAAO,SAAS,cAAc,WAAW,CAC7C,EACMC,EAAU,CACZ,WAAY,MAChB,EACMC,EAAW,IAAI,qBAAqBC,EAAiBF,CAAO,EAClE,IAAIG,EAAO,EACPC,EAAQ,GACZ,SAASC,EAAaC,EAAU,CAC5B,MAAMC,EAAaD,EAAS,KAAK,KAAK,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACtG;AAAA,uBACQL,CAAa;AAAA,4BACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,4BAK1BC,CAAK;AAAA;AAAA;AAAA;AAAA,4BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,4BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,4BAIRC,CAAS;AAAA;AAAA;AAAA,gBAIhC,EAAE,KAAK,EAAE,EACVf,EAAS,QAAQ,mBAAmB,YAAaQ,CAAU,CAC/D,CAEAR,EAAS,KAAK,iBAAiB,SAAUgB,CAAa,EACtD,SAASA,EAAcC,EAAK,CACxBA,EAAI,eAAc,EAElB,KAAM,CAAE,YAAAC,CAAa,EAAGD,EAAI,cAAc,SAC1CjB,EAAS,QAAQ,UAAY,GAC7BK,EAAQa,EAAY,MAChBb,IAAU,IACRc,EAAad,EAAOD,CAAI,EAC1BJ,EAAS,KAAK,SAEdD,EAAS,MAAM,CACX,QAAS,0EACrB,CAAW,CAGX,CACA,eAAeoB,EAAad,EAAOD,EAAM,CACrC,GAAI,CACA,MAAMG,EAAW,MAAMa,EAAM,IAAI,qEAAqEf,CAAK,mEAAmED,CAAI,EAAE,EACpL,GAAIG,EAAS,KAAK,KAAK,SAAW,EAC9BR,EAAS,MAAM,CACX,QAAS,0EACzB,CAAe,MACA,CACHO,EAAaC,CAAQ,EACrB,IAAIc,EAAY,IAAIC,EAAe,gBAAiB,CAChD,aAAc,KAC9B,CAAa,CACJ,CACGlB,GAAQG,EAAS,KAAK,MAAQ,IAAMH,EAAO,IAC3CF,EAAS,QAAQF,EAAS,KAAK,EAE/BE,EAAS,UAAUF,EAAS,KAAK,CAExC,MACY,CACTD,EAAS,MAAM,CACX,QAAS,0EACrB,CAAW,CACN,CACL,CACA,SAASI,EAAgBoB,EAAS,CAC9BA,EAAQ,QAAQC,GAAS,CACrB,GAAIA,EAAM,eAAgB,CACtBpB,GAAQ,EACRe,EAAad,EAAOD,CAAI,EACvB,KAAM,CAAE,OAAQqB,CAAU,EAAK,SAC/B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EACxC,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAC1B,CAAa,CACJ,CACT,CAAK,CACL"}